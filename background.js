(()=>{"use strict";function t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function r(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const n=function(){function e(t){var r=t.history,o=t.detail,n=t.listener,a=t.storage;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.history=r,this.detail=o,this.listener=n,this.storage=a}var n,a;return n=e,(a=[{key:"appendToHistory",value:function(){var e=this;return new Promise((function(o,n){try{e.storage.get([e.history.storage],(function(n){e._status(e.history.keywords,!0).then((function(a){if(!0===Array.isArray(n[e.history.storage])){var i=r(n[e.history.storage]);i.length>=e.history.limit&&i.shift(),i.push(a),e.storage.set(t({},e.history.storage,r(i))),o(i)}else e.storage.set(t({},e.history.storage,[a])),o(a)}))}))}catch(t){n(t)}}))}},{key:"getHistory",value:function(t){this.storage.get([this.history.storage],t)}},{key:"update",value:function(){var e=this;return new Promise((function(r,o){try{e.storage.get([e.detail.storage],(function(o){e._status(e.detail.keywords,!1).then((function(n){var a=o[e.detail.storage];(void 0===a||JSON.stringify(a)!==JSON.stringify(n))&&e.storage.set(t({},e.detail.storage,[n])),r(a)}))}))}catch(t){o(t)}}))}},{key:"get",value:function(t){this.storage.get([this.detail.storage],t)}},{key:"_status",value:function(t,e){var r=this;return new Promise((function(o,n){try{r.listener((function(r){var n={};if(t.indexOf("*")<0){for(var a=0;a<t.length;a++){var i=t[a];n[i]=r[i]}!0===e&&(n.time=(new Date).getTime()),o(n)}else o(r)}))}catch(t){n(t)}}))}}])&&o(n.prototype,a),e}();var a=new n({history:{keywords:["processors","temperatures"],storage:"cpu.history",limit:15},detail:{keywords:["archName","features","modelName","numOfProcessors"],storage:"cpu.detail"},listener:chrome.system.cpu.getInfo,storage:chrome.storage.local}),i=new n({history:{keywords:["availableCapacity","capacity"],storage:"memory.history",limit:15},listener:chrome.system.memory.getInfo,storage:chrome.storage.local}),s=new n({detail:{keywords:["*"],storage:"storage.detail"},listener:chrome.system.storage.getInfo,storage:chrome.storage.local});chrome.runtime.onInstalled.addListener((function(){try{a.update()}catch(t){console.error(t)}})),window.cpu=a,window.memory=i,window.storage=s,setInterval((function(){a.appendToHistory(),i.appendToHistory(),s.update()}),3e4)})();