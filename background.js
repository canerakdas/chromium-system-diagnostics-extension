(()=>{"use strict";function t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function r(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const n=function(){function e(t){var r=t.history,o=t.detail,n=t.listener,i=t.storage;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.history=r,this.detail=o,this.listener=n,this.storage=i}var n,i;return n=e,(i=[{key:"appendToHistory",value:function(){var e=this;return new Promise((function(o,n){try{e.storage.get([e.history.storage],(function(n){e._status(e.history.keywords,!0).then((function(i){if(!0===Array.isArray(n[e.history.storage])){var a=r(n[e.history.storage]);a.length>=e.history.limit&&a.shift(),a.push(i),e.storage.set(t({},e.history.storage,r(a))),o(a)}else e.storage.set(t({},e.history.storage,[i])),o(i)}))}))}catch(t){n(t)}}))}},{key:"getHistory",value:function(t){this.storage.get([this.history.storage],t)}},{key:"update",value:function(){var e=this;return new Promise((function(r,o){try{e.storage.get([e.detail.storage],(function(o){e._status(e.detail.keywords,!1).then((function(n){var i=o[e.detail.storage];(void 0===i||JSON.stringify(i)!==JSON.stringify(n))&&e.storage.set(t({},e.detail.storage,[n])),r(i)}))}))}catch(t){o(t)}}))}},{key:"get",value:function(t){this.storage.get([this.detail.storage],t)}},{key:"_status",value:function(t,e){var r=this;return new Promise((function(o,n){try{r.listener((function(r){for(var n={},i=0;i<t.length;i++){var a=t[i];n[a]=r[a]}!0===e&&(n.time=(new Date).getTime()),o(n)}))}catch(t){n(t)}}))}}])&&o(n.prototype,i),e}();var i=new n({history:{keywords:["processors","temperatures"],storage:"cpu.history",limit:15},detail:{keywords:["archName","features","modelName","numOfProcessors"],storage:"cpu.detail"},listener:chrome.system.cpu.getInfo,storage:chrome.storage.local}),a=new n({history:{keywords:["availableCapacity","capacity"],storage:"memory.history",limit:15},listener:chrome.system.memory.getInfo,storage:chrome.storage.local});chrome.runtime.onInstalled.addListener((function(){i.update()})),window.cpu=i,window.memory=a,setInterval((function(){i.appendToHistory(),a.appendToHistory()}),3e4)})();